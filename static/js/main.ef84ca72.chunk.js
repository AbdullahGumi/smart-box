(this["webpackJsonpsmart-box"]=this["webpackJsonpsmart-box"]||[]).push([[0],{104:function(e,t,n){e.exports=n(387)},109:function(e,t,n){},325:function(e,t,n){},381:function(e,t,n){},382:function(e,t,n){},383:function(e,t,n){},384:function(e,t,n){},385:function(e,t,n){},387:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(37),i=n.n(o),c=(n(109),n(97)),l=n.n(c),u=n(103),s=n(11),p="SET_FILE_PROPERTIES",f="SET_IMAGE_DIMENSIONS",m=function(e){return{type:p,payload:e}},d="SET_FACE_BOUNDARY",b="SET_APPAREL_BOUNDARY",g="TOGGLE_BOX",E="NUMBER_OF_FACES",h="APPARELS_INFO",y="APPARELS_LABEL",B="BOUNDING_BOX",v="WITH_SPINNER",O=function(){return{type:g}},I=function(e){return{type:d,payload:e}},_=function(e){return{type:b,payload:e}},A=function(e){return{type:E,payload:e}},w=function(e){return{type:B,payload:e}},x=function(e){return{type:h,payload:e}},j=function(e){return{type:v,payload:e}},N=(n(325),function(){return r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"SMART BOX"))}),P=n(100),S=n.n(P),R=n(53),F=n.n(R),C=(n(381),new F.a.App({apiKey:"3433c425ee5242de9459ae5f670f07f7"})),D=Object(s.b)((function(e){return{fileProperties:e.image.fileProperties}}),(function(e){return{setFaceBoundary:function(t){return e(I(t))},setApparelBoundary:function(t){return e(_(t))},numberOfFaces:function(t){return e(A(t))},setApparelsInfo:function(t){return e(x(t))},setBoundingBox:function(t){return e(w(t))},setWithSpinner:function(t){return e(j(t))},setImageDimensions:function(t){return e(function(e){return{type:f,payload:e}}(t))}}}))((function(e){var t=e.setFaceBoundary,n=e.setApparelBoundary,a=e.fileProperties,o=e.numberOfFaces,i=e.setBoundingBox,c=e.setApparelsInfo,l=e.setWithSpinner;e.setImageDimensions;return r.a.createElement("div",{className:"models-button"},r.a.createElement("button",{onClick:function(){l(!0),C.models.predict(F.a.FACE_DETECT_MODEL,{base64:a}).then((function(e){t(function(e){var t=e.outputs[0].data.regions.length;o(t);var n=e.outputs[0].data.regions.map((function(e){return e.region_info.bounding_box}));i(n);var a=document.getElementById("inputImage"),r=a.clientWidth,c=a.clientHeight;return n.map((function(e){return{leftCol:e.left_col*r,topRow:e.top_row*c,rightCol:r-e.right_col*r,bottomRow:c-e.bottom_row*c}}))}(e)),l(!1)}),(function(e){console.log("There was an error",e)})),c({}),n({})}},"Detect Face"),r.a.createElement("button",{onClick:function(){l(!0),C.models.predict("72c523807f93e18b431676fb9a58e6ad",{base64:a}).then((function(e){console.log("response at the  models",e),n(function(e){var t=e.outputs[0].data.regions.map((function(e){return e.data.concepts}));c(t);var n=e.outputs[0].data.regions.filter((function(e){return e.value>=.5})).map((function(e){return e.region_info.bounding_box}));i(n);var a=document.getElementById("inputImage");console.log("image dimensions",a.naturalWidth,a.naturalHeight);var r=a.naturalWidth,o=a.naturalHeight;return n.map((function(e){return{leftCol:e.left_col*r,topRow:e.top_row*o,rightCol:r-e.right_col*r,bottomRow:o-e.bottom_row*o}}))}(e)),l(!1)}),(function(e){console.log("There was an error",e)})),t({}),o(0)}},"Detect Apparels"))})),T=(n(382),Object(s.b)((function(e){return{boundingBox:e.box.boundingBox}}))((function(e){var t=e.boundingBox,n=document.getElementById("inputImage"),a=n.clientWidth,o=n.clientHeight;return t.map((function(e){return r.a.createElement("div",{className:"bounding-box",key:e.top_row,style:{top:e.top_row*o,left:e.left_col*a,bottom:o-e.bottom_row*o,right:a-e.right_col*a}})}))}))),L=(n(383),Object(s.b)((function(e){var t=e.image.fileProperties,n=e.box;return{fileProperties:t,faceBoundary:n.faceBoundary,apparelBoundary:n.apparelBoundary}}))((function(e){var t=e.fileProperties,n=e.faceBoundary,a=e.apparelBoundary;return r.a.createElement("div",{className:"image-div"},r.a.createElement("img",{id:"inputImage",width:"500px",height:"500px",key:"".concat(t),src:"data:image/png;base64, ".concat(t),alt:"sample"}),n.length>0&&r.a.createElement(T,null),a.length>0&&r.a.createElement(T,null))}))),k=(n(384),Object(s.b)((function(e){var t=e.box;return{faceCount:t.faceCount,apparelsInfo:t.apparelsInfo,withSpinner:t.withSpinner}}),(function(e){return{toggleBox:function(){return e(O())},setFileProperties:function(t){return e(m(t))},setFaceBoundary:function(t){return e(I(t))},setApparelBoundary:function(t){return e(_(t))},numberOfFaces:function(t){return e(A(t))},setBoundingBox:function(t){return e(w(t))},setApparelsInfo:function(t){return e(x(t))},setWithSpinner:function(t){return e(j(t))}}}))((function(e){var t=e.faceCount,n=e.apparelsInfo,a=e.toggleBox,o=e.setFaceBoundary,i=e.setApparelBoundary,c=e.numberOfFaces,l=e.setFileProperties,u=e.setBoundingBox,s=e.setApparelsInfo,p=e.setWithSpinner,f=e.withSpinner;return r.a.createElement("div",{className:"frame"},r.a.createElement("div",{className:"close-frame"},r.a.createElement("button",{onClick:function(){p(!1),l(),a(),o({}),i({}),c(0),u({}),s({})}},"X")),r.a.createElement("div",{className:"image-frame"},r.a.createElement(L,null)),r.a.createElement("div",{className:"info-frame"},!t>0&!n.length>0&!1===f?r.a.createElement("h4",null,"Select one of the models below to start."):null,t>1&&r.a.createElement("span",null,"I have detected  ",t," faces"),1===t&&r.a.createElement("span",null,"I have detected  ",t," face"),!0===f?r.a.createElement("div",{className:"spinner"},r.a.createElement(S.a,{type:"ThreeDots",color:"#778899",secondaryColor:"#778899"})):n.length>0&&r.a.createElement("div",{className:"apparels-info"},r.a.createElement("h4",null,"Name",r.a.createElement("span",{className:"apparels-name"},n.map((function(e){return r.a.createElement("p",{key:e[0].value},e[0].name,":")})))),r.a.createElement("h4",null,"Probabilty",r.a.createElement("span",{className:"apparels-value"},n.map((function(e){return r.a.createElement("p",{key:e[0].value},Math.floor(100*e[0].value)," %")}))))),r.a.createElement(D,null)))}))),W=(n(385),{particles:{number:{value:100,density:{enable:!0,value_area:800}}}}),M=Object(s.b)((function(e){return{fileProperties:e.image.fileProperties,isBoxVisible:e.box.isBoxVisible}}),(function(e){return{setFileProperties:function(t){return e(m(t))},toggleBox:function(){return e(O())}}}))((function(e){e.fileProperties;var t=e.toggleBox,n=e.setFileProperties,a=e.isBoxVisible;return r.a.createElement("div",{className:"main"},r.a.createElement(N,null),a?r.a.createElement(k,null):r.a.createElement(u.a,{onDrop:function(e){fetch(e.map((function(e){return URL.createObjectURL(e)}))).then((function(e){return e.blob()})).then((function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){var e=t.result.split(",").pop();n(e)}})),t()},accept:"image/*"},(function(e){var t=e.getRootProps,n=e.getInputProps,a=e.isDragActive,o=e.isDragAccept,i=e.isDragReject,c=o?"accept":i?"reject":"";return r.a.createElement("div",t({className:"dropzone ".concat(c)}),r.a.createElement("input",n()),r.a.createElement("h2",null,"I CAN DETECT FACES & APPARELS IN AN IMAGE. GIVE ME A TRY"),r.a.createElement("span",null,a?"\ud83d\udcc2":"\ud83d\udcc1"),r.a.createElement("p",null,"Drag and drop an image, or click to start "))})),r.a.createElement(l.a,{className:"particles",params:W}))})),U=n(22),V=n(101),G=n.n(V),H=n(102),X=n(7),Y={fileProperties:"",imageDimensions:{width:0,height:0}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(X.a)(Object(X.a)({},e),{},{fileProperties:t.payload});case f:return Object(X.a)(Object(X.a)({},e),{},{imageDimensions:t.payload});default:return e}},z={isBoxVisible:!1,faceBoundary:{},apparelBoundary:{},faceCount:0,apparelsInfo:{},apparelsLabel:[],boundingBox:{},withSpinner:!1},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(console.log("state at box reducer: ",e),t.type){case g:return Object(X.a)(Object(X.a)({},e),{},{isBoxVisible:!e.isBoxVisible});case d:return Object(X.a)(Object(X.a)({},e),{},{faceBoundary:t.payload});case b:return Object(X.a)(Object(X.a)({},e),{},{apparelBoundary:t.payload});case E:return Object(X.a)(Object(X.a)({},e),{},{faceCount:t.payload});case h:return Object(X.a)(Object(X.a)({},e),{},{apparelsInfo:t.payload});case y:return Object(X.a)(Object(X.a)({},e),{},{apparelsLabel:t.payload});case B:return Object(X.a)(Object(X.a)({},e),{},{boundingBox:t.payload});case v:return Object(X.a)(Object(X.a)({},e),{},{withSpinner:t.payload});default:return e}},$=Object(U.c)({image:J,box:K}),q=[H.a,G.a],Q=Object(U.d)($,U.a.apply(void 0,q));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(386);i.a.render(r.a.createElement(s.a,{store:Q},r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[104,1,2]]]);
//# sourceMappingURL=main.ef84ca72.chunk.js.map